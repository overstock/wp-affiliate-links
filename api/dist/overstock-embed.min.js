function ostk_Carousel(){this.initElement=function(){ostk_isset(this.atts.number_of_items)||(this.atts.number_of_items=10),this.atts.id?(this.obj=new ostk_SingleProductData,this.obj.multiImages=!0):(this.obj=new ostk_MultiProductData,this.obj.muliProduct=!0);var a=this;$ostk_jQuery.getScript("https://cdnjs.cloudflare.com/ajax/libs/flexslider/2.6.0/jquery.flexslider.min.js",function(b,c,d){a.initObject()})},this.generateHtml=function(){var a,b,c="",d=this;if(this.obj.muliProduct?a=this.obj.productList:(b=this.obj,a=b.arrayOfAllProductImages),c+='<div class="ostk-element ostk-carousel" '+ostk_getStyles(this.atts)+">",c+='<div class="ostk-element-inner">',c+='<div class="ostk-flexslider">',c+='<ul class="slides">',this.obj.muliProduct)for(var e=0;e<a.length;e++){var b=a[e];f=b.imgUrl_large,c+=this.getCarouselListItems(b,f)}else for(var e=0;e<a.length;e++){var f=a[e];c+=this.getCarouselListItems(b,f)}c+="</ul>",c+="</div>",a.length>1&&(c+='<div class="custom-navigation count-'+a.length+'">',c+='<a href="#" class="flex-prev">',c+='<div class="ostk-arrow">',c+='<i class="fa fa-chevron-left"></i>',c+="</div>",c+="</a>",c+='<a href="#" class="flex-next">',c+='<div class="ostk-arrow">',c+='<i class="fa fa-chevron-right"></i>',c+="</div>",c+="</a>",c+='<div class="custom-controls-container"></div>',c+="</div>"),c+="</div>",c+="</div>",c=$ostk_jQuery(c),a.length>1&&this.loadCarousel(c),this.renderHTML(c),this.resizeCarousel(c),$ostk_jQuery(window).resize(function(){clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){d.resizeCarousel(c)},250)})},this.getCarouselListItems=function(a,b){var c="";return c+='<li data-thumb="'+b+'">',c+='<a href="'+a.getAffiliateUrl()+'" '+ostk_getLinkTarget(this.atts)+">",c+='<div class="ostk-element-content">',c+='<img src="'+b+'"/>',c+="</div>",c+='<div class="element-overlay">',c+='<p class="title">'+a.name+"</p>",a.averageReviewAsGif&&(c+='<img class="ostk-rating" src="'+a.getAverageReviewAsGif()+'"/>'),c+='<p class="price">'+a.price+"</p>",c+='<img class="ostk-logo" src="http://ak1.ostkcdn.com/img/mxc/affiliate-embed-widgets-ostk-logo.png">',c+="</div>",c+="</a>",c+="</li>"},this.loadCarousel=function(a){var b=this;a.find(".ostk-flexslider").flexslider({animation:"slide",controlNav:"thumbnails",customDirectionNav:a.find(".custom-navigation a"),controlsContainer:a.find(".custom-controls-container"),touch:!0,slideshow:!1,start:function(a){b.showThumbnails(a,this)},after:function(a){b.showThumbnails(a,this)}})},this.resizeCarousel=function(a){var b=500,c=a.find(".ostk-element-inner");a.outerWidth()>b?(c.addClass("desktop-size"),c.removeClass("mobile-size")):(c.removeClass("desktop-size"),c.addClass("mobile-size"))},this.showThumbnails=function(a,b){var c=5,d=a.currentSlide,e=a.controlsContainer.find("ol li"),f=(c-1)/2;e.each(function(a){a>=d-f&&d+f>=a||f>d&&c>a||e.length-d<=f&&e.length-a<=c?$ostk_jQuery(this).show():$ostk_jQuery(this).hide()})}}function ostk_Leaderboard(){this.initElement=function(){"mini"===this.atts.version||"mobile"===this.atts.version?this.atts.number_of_items=1:ostk_isset(this.atts.number_of_items)||(this.atts.number_of_items=2),this.obj=new ostk_MultiProductData,this.initObject()},this.generateHtml=function(){var a=this.obj.getProductList(),b="",c="white";if(ostk_isset(this.atts.event)){this.atts.event.split(" ").join("-").toLowerCase();"flash_deals"==this.atts.event&&(c="flash-deals")}a[0].dealEndTime&&(this.obj.dealEndTime=a[0].dealEndTime),b+='<div class="item-holder item-count-'+a.length+'">';for(var d=0;d<a.length;d++){var e=a[d];b+='<div class="ostk-item">',b+='<div class="ostk-element-content">',b+='<a href="'+e.getAffiliateUrl()+'" '+ostk_getLinkTarget(this.atts)+">",b+='<img class="product-image" src="'+e.imgUrl_large+'"/>',b+='<div class="product-info">',b+='<p class="title">'+e.name+"</p>",ostk_isset(this.atts.event)||("mini"!==this.atts.version&&"mobile"!==this.atts.version&&(b+='<p class="description">'+e.description+"</p>"),e.averageReviewAsGif&&(b+='<img src="'+e.getAverageReviewAsGif()+'"/>')),e.price&&(b+='<p class="price">$'+e.price+"</p>"),e.percentOff&&(b+='<p class="savings">'+e.percentOff+"% OFF</p>"),b+="</div>",b+="</a>",b+="</div>",b+="</div>"}b+="</div>","flash_deals"==this.atts.event&&"mini"==this.atts.version&&(b+='<div class="dealEndTime"></div>'),b+='<div class="ostk-element-footer">',"flash_deals"==this.atts.event?(b+=this.getBranding("flash-deals"),"mini"!==this.atts.version&&"mobile"!==this.atts.version&&(b+='<div class="dealEndTime"></div>'),b+=this.getBranding()):b+="sales"==this.atts.event||"promotions"==this.atts.event?this.getBranding():this.getBranding("white"),b+="</div>",this.renderElement(b)}}function ostk_Link(){this.initElement=function(){var a="",b=ostk_isset(this.atts.link_text)?this.atts.link_text:"A link to Overstock.com",c=ostk_generateAffiliateLink(this.atts.url);a='<a href="'+c+'" class="ostk-element ostk-link" '+ostk_getLinkTarget(this.atts)+">"+b+"</a>",this.renderHTML(a)}}function ostk_ProductDetailsLink(){this.initElement=function(){this.obj=new ostk_SingleProductData,this.initObject()},this.generateHtml=function(){var a="";switch(this.atts.display){case"name":a=this.obj.name;break;case"price":a=this.obj.price;break;case"description":a=this.obj.description}a='<a href="'+this.obj.getAffiliateUrl()+'" class="ostk-element ostk-product-link" '+ostk_getLinkTarget(this.atts)+">"+a+"</a>",this.renderHTML(a)}}function ostk_Rectangle(){this.initElement=function(){this.obj=new ostk_SingleProductData,this.initObject()},this.generateHtml=function(){var a="";a+='<a href="'+this.obj.getAffiliateUrl()+'" '+ostk_getLinkTarget(this.atts)+">",a+='<div class="dealEndTime"></div>',a+='<div class="ostk-element-content">',a+='<img src="'+this.obj.imgUrl_large+'" class="product-image"/>',ostk_isset(this.atts.event)&&(a+='<div class="product-info">',a+='<p class="title">'+this.obj.name+"</p>","flash_deals"==this.atts.event?ostk_isset(this.obj.price)&&(a+='<p class="price">$'+this.obj.price+"</p>"):(a+='<p class="description">'+this.obj.discountMsg+"</p>",a+='<p class="savings">'+this.obj.percentOff+"% OFF</p>"),a+="</div>"),a+="</div>",ostk_isset(this.atts.event)||(a+='<div class="element-overlay">',a+='<div class="ostk-element-content">',a+='<p class="title">'+this.obj.name+"</p>",this.obj.averageReviewAsGif&&(a+='<img class="ostk-rating" src="'+this.obj.getAverageReviewAsGif()+'"/>'),ostk_isset(this.obj.price)&&(a+='<p class="price">$'+this.obj.price+"</p>"),a+="</div>",a+="</div>"),a+="</a>",this.renderElement(a)}}function ostk_SampleData(){this.initElement=function(){this.obj=new ostk_SingleProductData,this.initObject()},this.generateHtml=function(){var a="";a+="<p>The name is <strong>"+this.obj.name()+"</strong></p><br/>",a+="<p>The price is <strong>"+this.obj.price+"</strong></p><br/>",a+="<p>The rating (as decimal is) <strong>"+this.obj.getAverageReviewAsDecimal()+"</strong></p><br/>",a+="<p>The rating (as gif is)... see below</p><br/>",a+='<img src= "'+this.obj.getAverageReviewAsGif()+'"/><br/>',a+="<p> <strong>Large image:</strong></p><br/>",a+='<a href="'+this.obj.affiliateUrl+'"><img src= '+this.obj.imgUrl_large+" /></a><br/>",a+="<p> <strong>Medium image:</strong></p><br/>",a+='<a href="'+this.obj.affiliateUrl+'"><img src= '+this.obj.imgUrl_medium+" /></a><br/>",a+="<p> <strong>Small image:</strong></p><br/>",a+='<a href="'+this.obj.affiliateUrl+'"><img src= '+this.obj.imgUrl_thumbnail+" /></a><br/>",a+='<p>The url link is <a href="'+this.obj.affiliateUrl+'"><strong>here, click me!</strong></a></p><br/>',a+="<p>Also, all photos are clickable.<p><br/>",this.renderHTML(a)}}function ostk_SearchQuery(){this.initElement=function(){var a="",b=ostk_isset(this.atts.query)?"keywords="+this.atts.query.split(" ").join("%20"):null,c="",d="",e=null,f="",g=this.atts.link_text;if(e||null==b&&(e='"query" parameter cannot be empty.'),e&&ostk_isset(this.atts.category)&&(d=ostk_getTaxonomy(this.atts.category),d?c="&taxonomy="+d:e='"category" not found. Please check spelling and try again.'),e&&ostk_isset(this.atts.sort_by)&&(sortOptionParam=ostk_getSortOption(this.atts.sort_by),sortOptionParam?f="&sortOption="+sortOptionParam:e='"sort_by" not found. Please check spelling and try again.'),e)this.renderHTMLError(e);else{var h=ostk_generateAffiliateLink("http://www.overstock.com/search?"+b+c+f);g=null!=this.atts.link_text?this.atts.link_text:this.atts.query,a='<a href="'+h+'" class="ostk-element ostk-search" '+ostk_getLinkTarget(this.atts)+">"+g+"</a>",this.renderHTML(a)}}}function ostk_Skyscraper(){this.initElement=function(){ostk_isset(this.atts.number_of_items)||(this.atts.number_of_items=2),this.obj=new ostk_MultiProductData,this.initObject()},this.generateHtml=function(){var a=Array(),b="";a=this.obj.getProductList(),a[0].dealEndTime&&(this.obj.dealEndTime=a[0].dealEndTime),b+='<div class="dealEndTime"></div>',b+='<div class="item-holder item-count-'+a.length+'">';for(var c=0;c<a.length;c++){var d=a[c];b+='<div class="ostk-element-content">',b+='<a href="'+d.getAffiliateUrl()+'" '+ostk_getLinkTarget(this.atts)+">",b+='<img class="product-image" src="'+d.imgUrl_large+'"/>',b+='<div class="product-info">',b+='<p class="title">'+d.name+"</p>",ostk_isset(this.atts.event)||d.averageReviewAsGif&&(b+='<img src="'+d.getAverageReviewAsGif()+'"/>'),ostk_isset(this.atts.event)&&"flash_deals"!=this.atts.event||ostk_isset(d.price)&&(b+='<p class="price">$'+d.price+"</p>"),b+="</div>",b+="</a>",b+="</div>"}b+="</div>",this.renderElement(b)}}function ostk_StockPhoto(){this.initElement=function(){ostk_isset(this.atts.image_number)||(this.atts.image_number=1),ostk_isset(this.atts.id)?(this.obj=new ostk_SingleProductData,this.obj.multiImages=!0):this.obj=new ostk_MultiProductData,this.initObject()},this.generateHtml=function(){var a="",b=null;if(this.atts.image_number){var c;c=this.obj.productList?this.obj.productList:this.obj.arrayOfAllProductImages,c.length<this.atts.image_number&&(b="Image number "+this.atts.image_number+" is not available.",b+=c.length>1?" Image numbers from 1 to "+c.length+" are available.":" This image only has 1 available image.",b+=" Please change the image_number attribute and try again")}if(b)this.renderHTMLError(b);else{var d;d=this.obj.productList?this.obj.productList[this.atts.image_number-1]:this.obj,a+='<div class="ostk-element ostk-stock-photo" '+ostk_getStyles(this.atts)+">",a+='<div class="ostk-element-inner">',a+='<a href="'+d.getAffiliateUrl()+'" '+ostk_getLinkTarget(this.atts)+">",a+='<div class="ostk-element-content">',a+='<img src="'+d.imgUrl_large+'" width="'+this.atts.width+'" height="'+this.atts.height+'" style="'+this.atts.custom_css+'"  class="product-image">',a+="</div>",a+='<div class="element-overlay">',a+='<div class="ostk-element-content">',d.name&&(a+='<p class="title">'+d.name+"</p>"),d.averageReviewAsGif&&(a+='<img class="ostk-rating" src="'+d.getAverageReviewAsGif()+'"/>'),d.price&&(a+='<p class="price">'+d.price+"</p>"),a+='<img class="ostk-logo" src="http://ak1.ostkcdn.com/img/mxc/affiliate-embed-widgets-ostk-logo.png">',a+="</div>",a+="</div>",a+="</a>",a+="</div>",a+="</div>",this.renderHTML(a)}}}function ostk_Widget(a,b){this.atts=a,this.element=b,this.init=function(){var b=null;if(ostk_isset(ostk_developerId)||(b="LinkShare ID needs to be authenticated."),b||(""==this.atts.type||null==this.atts.type?b="Type parameter cannot be empty.":ostk_isset(this.atts.link_target)&&!ostk_isValidLinkTarget(this.atts)&&(b='"link_target" not found. Please check spelling and try again.')),!b){var c=ostk_areAttributesValid(this.atts);c!==!0&&(b=c)}if(!b){var d=/^[1-9]\d*(px|%)/i;ostk_isset(this.atts.width)&&!d.exec(this.atts.width)&&(b="Width requires % or px, and a value greater than 0.")}b||ostk_isset(a.number_of_items)&&"0"==String(a.number_of_items)&&(b='"number_of_items" parameter must be at least 1.'),b?this.renderHTMLError(b):this.initElement()},this.initObject=function(){var a=null;if(ostk_isset(this.atts.number_of_items)?this.obj.limit=parseInt(this.atts.number_of_items):this.obj.limit=10,this.atts.id)this.obj.productId=this.atts.id;else if(this.atts.product_ids)this.obj.productIds=this.atts.product_ids;else if(this.atts.event)this.obj.query=ostk_getEventQuery(this.atts.event),this.obj.query||(a="Invalid query attribute");else if(this.atts.category||this.atts.keywords){var b="",c="",d="";this.atts.category?(b="&taxonomy="+ostk_getTaxonomy(this.atts.category),c=ostk_isset(this.atts.sort_by)?"&sortOption="+ostk_getSortOption(this.atts.sort_by):"",ostk_isset(b)&&0==ostk_getTaxonomy(this.atts.category)&&(a="category="+this.atts.category+" does not match our given categories, please check it.")):this.atts.keywords&&(d="&keywords="+this.atts.keywords.split(" ").join("%20")),this.obj.query="https://api.overstock.com/ads/products?developerid="+ostk_developerId+d+b+c}if(a)this.renderHTMLError(a);else{var e=this;this.obj.init(function(){e.generateHtml()},function(a){e.renderHTMLError(a)})}},this.setFlashDealsTimer=function(a){var b=this,c=ostk_getTimeDiff(this.obj.dealEndTime);a.html(this.timeDiffToString(c));var d=setInterval(function(){1e3>=c?(clearInterval(d),b.initObject()):(c-=1e3,a.html(b.timeDiffToString(c)))},1e3,!0)},this.timeDiffToString=function(a){var b=a,c=Math.floor(b/1e3/60/60);b-=1e3*c*60*60;var d=Math.floor(b/1e3/60);b-=1e3*d*60;var e=Math.floor(b/1e3);return b-=1e3*e,"skyscraper"===this.atts.type||"leaderboard"===this.atts.type?'<div class="double-line"><p class="deliminators"><span>:</span><span>:</span></p><p class="top-line"><span>'+ostk_make_two_digits(c)+"</span><span>"+ostk_make_two_digits(d)+"</span><span>"+ostk_make_two_digits(e)+'</span></p><p class="bottom-line"><span>HR</span><span>MIN</span><span>SEC</span>':'<div class="single-line"><p class="single-line">'+ostk_make_two_digits(c)+" <span>HR</span> : "+ostk_make_two_digits(d)+" <span>MIN</span> : "+ostk_make_two_digits(e)+" <span>SEC</span></p></div>"},this.getBranding=function(a){var b="",c="";switch(ostk_isset(a)||(a="overstock"),a){case"flash-deals":c="affiliate-embed-widgets-flash-deals-logo.png";break;case"white":c="affiliate-embed-widgets-ostk-logo-white.png";break;default:c="affiliate-embed-widgets-ostk-logo.png"}return b='<div class="branding">',b+='<img src="http://ak1.ostkcdn.com/img/mxc/'+c+'"/>',b+="</div>"},this.renderElement=function(b){var c="",d="",e="";if(ostk_isset(a.version)&&(d+=" "+a.version),ostk_isset(a.event)){var f=a.event.split(" ").join("-").toLowerCase();d+=" sales-event "+f.split("_").join("-")}else e=ostk_getStyles(a);c+='<div class="ostk-element ostk-'+a.type+" "+d+'" '+e+">",c+='<div class="ostk-element-inner">',"leaderboard"!==a.type&&(c+='<div class="ostk-element-header">',c+=ostk_isset(a.event)&&"flash_deals"===a.event?this.getBranding("flash-deals"):this.getBranding("white"),c+="</div>"),c+=b,"leaderboard"!==a.type&&ostk_isset(a.event)&&"flash_deals"===a.event&&(c+='<div class="ostk-element-footer">',c+=this.getBranding(),c+="</div>"),c+="</div>",c+="</div>",c=$ostk_jQuery(c),ostk_isset(a.event)&&"flash_deals"==a.event&&this.setFlashDealsTimer(c.find(".dealEndTime")),this.renderHTML(c)},this.renderHTML=function(a){a=$ostk_jQuery(a),this.element.fadeOut("slow"),this.element.replaceWith(a),this.element=a,a.hide(),a.fadeIn("slow")},this.renderHTMLError=function(a){this.renderHTML(ostk_formatError(a))}}function l(a,b){"undefined"!=typeof b?console.log(a+": "+b):console.log(a)}function d(a){console.dir(a)}function ostk_searchURLForParam(a,b){if(a.indexOf("?")>-1&&a.indexOf(b))for(var c=a.split("?")[1],d=c.split("&"),e=0;e<d.length;e++){var f=d[e].split("="),g=f[0],h=f[1];if(g==b)return h}return null}function ostk_getRandomInt(a,b){return Math.floor(Math.random()*(b-a+1))+a}function ostk_addTrackingToUrl(a){return a+"&clickplatform="+ostk_clickPlatform+"&clickurl="+ostk_clickurl}function ostk_getTimeDiff(a){var b=new Date(a),c=new Date;return b-c}function ostk_make_two_digits(a){return 10>a?"0"+a:a}function ostk_generateAffiliateLink(a){var b="?";return a.indexOf("?")>-1&&(b="&"),"https://api.overstock.com/ads/deeplink?id="+ostk_developerId+"&mid=38601&murl="+encodeURIComponent(a+b+"utm_medium=api&utm_source=linkshare&utm_campaign=241370&CID=241370&devid="+ostk_developerId)}function ostk_getTaxonomy(a){if(null==a)return!1;switch(a){case"Home & Garden":return"sto1";case"Jewelry & Watches":return"sto4";case"Sports & Toys":return"sto5";case"Worldstock Fair Trade":return"sto6";case"Clothing & Shoes":return"sto7";case"Health & Beauty":return"sto8";case"Food & Gifts":return"sto9";case"Office Supplies":return"sto22";case"Luggage & Bags":return"sto33";case"Baby":return"sto35";case"Crafts & Sewing":return"sto34";case"Pet Supplies":return"sto37";case"Emergency Preparedness":return"sto42";case"Bedding & Bath":return"sto43";default:return!1}}function ostk_checkTaxonomy(a,b){if(a=strtolower(a),b=strtolower(b),b==a)return!0;taxonomyArray=explode(" ",b),in_array("&",taxonomyArray)&&unset(taxonomyArray[1]);for(var c=0;c<taxonomyArray.length;c++)if(taxonomyArray[c]==a)return!0;return!1}function ostk_getSortOption(a){switch(a.toLowerCase()){case"Relevance".toLowerCase():return"Relevance";case"Recommended".toLowerCase():return"Recommended";case"Reviews".toLowerCase():return"Avg.%20Customer%20Review";case"Name".toLowerCase():return"Name";case"Lowest Price".toLowerCase():return"Lowest+Price";case"Highest Price".toLowerCase():return"Highest+Price";case"New Arrivals".toLowerCase():return"New+Arrivals";default:return null}}function ostk_getEventQuery(a){var b=ostk_findObjWhereKeyEqualsValue(event_list,"event",a);return b?b.url:null}function ostk_stringToList(a){return a=a.split(" ").join(","),a=a.split(",,").join(","),a.split(",")}function ostk_formatError(a){return'<p class="ostk-error">ERROR: '+a+"</p>"}function ostk_checkDeveloperId(){return ostk_isset(ostk_developerId)?!0:!1}function ostk_limitArrayCount(a,b){return"string"==typeof a&&(a=ostk_stringToList(a)),a.length>b?a.splice(0,b):a}function ostk_areAttributesValid(a){var b=null,c=a.type;if(c||(b="Type attribute is required"),!b){var d=(ostk_getKeyList(a),ostk_patterns[c]);if(d)var e=d.required_attributes,f=d.optional_attributes;else b="Invalid type attribute"}if(!b){var g=ostk_lookForMissingRequiredAttributes(a,e);g.length>0&&(b="Missing required attributes: "+g.join(", "))}if(!b){var h=ostk_lookForInvalidAtts(a,e,f);h.length>0&&(b="The following are not valid attributes: "+h.join(", "))}return b?b:!0}function ostk_lookForMissingRequiredAttributes(a,b){for(var c=Array(),d=0;d<b.length;d++){var e=b[d],f=e.name;if(!a[f])if(e.options){for(var g=!1,h=0;h<e.options.length;h++){var i=e.options[h].name;a[i]&&(g=!0)}g||c.push("("+ostk_getListByKey(e.options,"name").join(" or ")+")")}else c.push(f)}return c}function ostk_lookForInvalidAtts(a,b,c){var d=Array(),e=$ostk_jQuery.merge($ostk_jQuery.merge([],c),b);return d=ostk_lookForInvalidAttsInArray(a,e),ostk_getKeyList(d)}function ostk_lookForInvalidAttsInArray(a,b){var c={};for(var d in a){for(var e=a[d],f=!1,g=b.length-1;g>=0;g--){var h=b[g],i=h.name;if(h.options){if(h.options[0].name)for(var j=0;j<h.options.length;j++){var k=h.options[j],l=k.name;if(d===l){f=!0;break}}else if(d===i){for(var m=!1,j=0;j<h.options.length;j++){var l=h.options[j];if(e===l){m=!0;break}}if(m){f=!0;break}f=!1}}else if(d===i){f=!0;break}}f||(c[d]=e,b.splice(g,1))}return c}function ostk_getKeyList(a){var b=Array();for(var c in a)b.push(c);return b}function ostk_getListByKey(a,b){for(var c=Array(),d=0;d<a.length;d++){var e=a[d];c.push(e[b])}return c}function ostk_findObjWhereKeyEqualsValue(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(e[b]==c)return e}return null}function ostk_getStyles(a){var b="";return ostk_isset(a.width)&&(b="width:"+a.width+";"),'style="'+b+'"'}function ostk_isValidLinkTarget(a){switch(a.link_target){case"new_tab":case"current_tab":return!0;default:return!1}}function ostk_getLinkTarget(a){var b="_blank";if(a.link_target)switch(a.link_target){case"current_tab":b="_self"}return"target='"+b+"'"}function ostk_isset(a){return null==a?!1:"undefined"==typeof a?!1:!0}function ostk_array_key_exists(a,b){return!b||b.constructor!==Array&&b.constructor!==Object?!1:a in b}function ostk_MultiProductData(){this.productIds,this.limit,this.developerId=ostk_developerId,this.productList=Array(),this.error=null,this.product_count_down=0,this.init=function(a,b){var c=this;if(this.productIds){null!==this.limit&&(productIds=ostk_limitArrayCount(this.productIds,this.limit)),this.product_count_down=productIds.length;for(var d=0;d<productIds.length;d++){var e=new ostk_SingleProductData;e.productId=productIds[d],this.createSingleObjects(e,a,b)}}else this.query&&(null!==this.limit&&(this.query+="&limit="+this.limit),this.query=ostk_addTrackingToUrl(this.query),$ostk_jQuery.get(this.query,function(d){if(d.products&&d.products.length>0?d=d.products:d.sales&&d.sales.length>0?d=d.sales:this.error="No available products for this query",this.error)b(this.error);else{c.product_count_down=d.length;for(var e=0;e<d.length;e++){var f=new ostk_SingleProductData;f.obj=d[e],c.createSingleObjects(f,a,b)}}}).fail(function(){b("Invalid query")}))},this.createSingleObjects=function(a,b,c){var d=this;a.init(function(a){d.productList.push(a),d.checkProductCompletion(b,c),a.dealEndTime&&(d.dealEndTime=a.dealEndTime)},function(a){d.error=a,d.checkProductCompletion(b,c)})},this.checkProductCompletion=function(a,b){this.product_count_down--,0===this.product_count_down&&(this.error?b(this.error):a())},this.getProductList=function(){return this.productList}}function ostk_Plugin(){this.constructor=function(){this.ostk_check_jquery()},this.ostk_check_jquery=function(){var a=this;"undefined"==typeof jQuery?this.ostk_get_script("http://code.jquery.com/jquery-2.1.4.min.js",function(){a.ostk_init_elements()}):this.ostk_init_elements()},this.ostk_init_elements=function(){var a=this;$ostk_jQuery=jQuery.noConflict(),$ostk_jQuery(document).ready(function(){a.load_css(),a.ostk_preloaders(),a.getPatterns()})},this.getPatterns=function(){this.ostk_patterns=ostk_patterns,this.get_elements()},this.ostk_get_script=function(a,b){var c=document.createElement("script");c.src=a;var d=document.getElementsByTagName("head")[0],e=!1;c.onload=c.onreadystatechange=function(){e||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(e=!0,b(),c.onload=c.onreadystatechange=null,d.removeChild(c))},d.appendChild(c)},this.load_css=function(){$ostk_jQuery("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet"}).attr("href",ostk_api_url+"dist/overstock-embed.min.css")},this.ostk_preloaders=function(){$ostk_jQuery("div").filter("[data-tag='overstock']").each(function(){for(var a=$ostk_jQuery(this),b=a[0].attributes,c=0;c<b.length;c++){if("data-width"===b[c].name){a.css("width",b[c].value);break}if("data-type"==b[c].name&&"leaderboard"==b[c].value){a.css("width","728px");break}}var d=$ostk_jQuery("<div>").attr("class","ostk-loader").appendTo(a);$ostk_jQuery("<img>").attr({src:"http://ak1.ostkcdn.com/img/mxc/affiliate-embed-widgets-ostk-logo.png",width:125}).appendTo(d);var e=$ostk_jQuery("<p>").text(" Loading...").appendTo(d);$ostk_jQuery("<i>").attr({"class":"fa fa-refresh fa-spin"}).prependTo(e)})},this.get_elements=function(){$ostk_jQuery("div").filter("[data-tag='overstock']").length;$ostk_jQuery("div").filter("[data-tag='overstock']").each(function(){for(var a=$ostk_jQuery(this),b=$ostk_jQuery(this)[0].attributes,c={},d=0;d<b.length;d++)if(b[d].name.indexOf("data-")>=0){var e=b[d].name.split("data-")[1],f=b[d].value;"tag"!=e&&(c[e]=f)}var g,h=!0;switch(c.type){case"search":g=new ostk_SearchQuery;break;case"link":g=new ostk_Link;break;case"rectangle":g=new ostk_Rectangle;break;case"leaderboard":g=new ostk_Leaderboard;break;case"skyscraper":g=new ostk_Skyscraper;break;case"carousel":g=new ostk_Carousel;break;case"stock_photo":g=new ostk_StockPhoto;break;case"product_link":g=new ostk_ProductDetailsLink;break;case"sample_data":g=new ostk_SampleData;break;default:h=!1}if(h){var i=$ostk_jQuery.extend({},new ostk_Widget(c,a),g);i.init()}else{var j=ostk_formatError("Invalid widget type");a.replaceWith(j)}})},this.constructor()}function ostk_SingleProductData(){this.productId,this.name,this.price,this.baseImageUrl,this.imgUrl_large,this.imgUrl_medium,this.imgUrl_thumbnail,this.affiliateUrl,this.averageReviewAsDecimal,this.averageReviewAsGif,this.arrayOfAllProductImages,this.description,this.multiImages=!1,this.init=function(a,b){var c=this,d="";this.obj?c.processData(this.obj,a,b):(this.productId?(d="https://api.overstock.com/ads/products?developerid="+ostk_developerId+"&product_ids="+this.productId,this.multiImages&&(d+="&fetch_all_images=true")):this.query&&(d=this.query),d=ostk_addTrackingToUrl(d),$ostk_jQuery.get(d,function(d){var e=null;if(d.products&&d.products.length>0){var f=ostk_getRandomInt(0,d.products.length-1);d=d.products[f]}else d.sales&&d.sales.length>0?d=d.sales[0]:e="Invalid product id: "+c.productId;e?b(e):c.processData(d,a,b)}).fail(function(){b("Invalid product id: "+c.productId)}))},this.processData=function(a,b,c){this.name=this.setName(a),this.productId=a.id,this.developerId=ostk_developerId,this.imgUrl_large=ostk_isset(a.largeImageURL)?a.largeImageURL:a.imageURL,this.imgUrl_medium=a.imageURL,this.imgUrl_thumbnail=a.smallImageURL,a.description&&(this.description=a.description),a.price&&(this.price=a.price),a.discountMsg&&(this.discountMsg=a.discountMsg),a.url?this.affiliateUrl=a.url:a.saleURL&&(this.affiliateUrl=a.saleURL),a.review&&a.review.stars&&(this.averageReviewAsDecimal=a.review.stars,this.averageReviewAsGif=this.getStars(a.review.stars)),a.dealEndTime&&(this.dealEndTime=a.dealEndTime),"percentOff"in a&&(this.percentOff=null!==a.percentOff?a.percentOff:0),a.images&&(this.arrayOfAllProductImages=this.getImageList(a.images)),b(this)},this.getImageList=function(a){for(var b=Array(),c=0;c<a.length;c++)b.push(a[c].scaledImages[1].url);return b.length||b.push(this.imgUrl_thumbnail),b},this.getStars=function(a){return ostk_isset(a)?(a%1===0&&(a+=".0"),a=String(a),a=a.split(".").join("_"),"http://ak1.ostkcdn.com/img/mxc/stars"+a+".gif"):null},this.isValidProductID=function(){return this.validProductID},this.setName=function(a){return ostk_isset(a.name)?a.name:ostk_isset(a.detailMsg)?a.detailMsg:void 0},this.getAffiliateUrl=function(){return ostk_isset(this.affiliateUrl)?this.affiliateUrl:""},this.getAverageReviewAsDecimal=function(){return ostk_isset(this.averageReviewAsDecimal)?this.averageReviewAsDecimal:""},this.getAverageReviewAsGif=function(){return ostk_isset(this.averageReviewAsGif)?this.averageReviewAsGif:""},this.getImageAtIndex=function(a){return this.arrayOfAllProductImages[a]}}if("undefined"==typeof ostk_plugin){var ostk_developerId=null;if(!ostk_isset(ostk_clickPlatform))var ostk_clickPlatform="embed";for(var ostk_clickurl=window.location.href,ostk_api_url="https://rawgithub.com/overstock/wp-affiliate-links/master/api/",scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++)if(scripts[i].src.indexOf("overstock-embed")>-1){var id_value=ostk_searchURLForParam(scripts[i].src,"id");id_value&&(ostk_developerId=id_value)}var ostk_url="https://api.overstock.com";"undefined"!=typeof os&&"undefined"!=typeof os.Otags&&"undefined"!=typeof os.Otags.api_url&&(ostk_url=os.Otags.api_url);var event_list=[{event:"flash_deals",url:ostk_url+"/ads/products/deals?developerid="+ostk_developerId+"&sort=lowest_price"},{event:"promotions",url:ostk_url+"/ads/sales?developerid="+ostk_developerId+"&sale_type=promotion"},{event:"sales",url:ostk_url+"/ads/sales?developerid="+ostk_developerId+"&sale_type=sale"}],ostk_plugin=new ostk_Plugin}var ostk_patterns=ostk_patterns||{};ostk_patterns.carousel={name:"Carousel",description:"Lets you create a carousel widget for up to 10 products. You will get the product ids from the product&apos;s URL on Overstock.com.",notes:'You will get the product id from the products URL on Overstock.com. For instance, the product URL "http://www.overstock.com/Home-Garden/DHP-Emily-Grey-Linen-Chaise-Lounger/9747008/product.html" has a product ID of 9747008.',example_shortcodes:[{type:"carousel",category:"Home & Garden",width:"400px"}],required_attributes:[{name:"type"},{options:[{name:"id",description:"Any product id",example:"10234427"},{name:"product_ids",description:"A list of product ids separated by commas."},{name:"category",description:"Select items from a specific Overstock store.",options:["Home & Garden","Jewelry & Watches","Sports & Toys","Worldstock Fair Trade","Clothing & Shoes","Health & Beauty","Food & Gifts","Office Supplies","Luggage & Bags","Crafts & Sewing","Baby","Pet Supplies","Emergency Preparedness","Bedding & Bath"]},{name:"keywords",description:"A keyword search",example:"soccer shoes"}]}],optional_attributes:[{name:"number_of_items",description:"Choose an item limit. By default it is unlimited.",example:"10"},{name:"sort_by",description:"Choose a sort option",options:["Relevance","Recommended","Reviews","Lowest Price","Highest Price","New Arrivals"]},{name:"width",description:'Width of the shortcode element. This attribute accepts "px" or "%"',"default":"100%",example:'100%" or "300px'},{name:"link_target",description:"Choose how to open the link.","default":"new_tab",options:["new_tab","current_tab"]}]},ostk_patterns.leaderboard={name:"Leaderboard",description:"Lets you create a leaderboard banner for up to two products.",notes:['You will get the product id from the products URL on Overstock.com. For instance, the product URL "http://www.overstock.com/Home-Garden/DHP-Emily-Grey-Linen-Chaise-Lounger/9747008/product.html" has a product ID of 9747008.'],example_shortcodes:[{type:"leaderboard",category:"Home & Garden"}],required_attributes:[{name:"type"},{options:[{name:"product_ids",description:"A list of product ids separated by commas.",notes:"Required to have 1 or 2 product ids"},{name:"event",description:"Sales event elements",options:["flash_deals"]},{name:"category",description:"Select items from a specific Overstock store.",options:["Home & Garden","Jewelry & Watches","Sports & Toys","Worldstock Fair Trade","Clothing & Shoes","Health & Beauty","Food & Gifts","Office Supplies","Luggage & Bags","Crafts & Sewing","Baby","Pet Supplies","Emergency Preparedness","Bedding & Bath"]},{name:"keywords",description:"A keyword search",example:"soccer shoes"}]}],optional_attributes:[{name:"version",description:"Different sizes and designs for the leaderboard.","default":"standard",options:["standard","mini","mobile"]},{name:"sort_by",description:"Choose a sort option",options:["Relevance","Recommended","Reviews","Lowest Price","Highest Price","New Arrivals"]},{name:"number_of_items",description:"Choose an item limit. By default it is unlimited.","default":"10"},{name:"link_target",description:"Choose how to open the link.","default":"new_tab",options:["new_tab","current_tab"]}]},ostk_patterns.link={name:"Link",description:"The URL link shortcode lets you create links to any page on Overstock.com.",example_shortcodes:[{type:"link",url:"http://www.overstock.com/Worldstock-Fair-Trade/Natural-Thailand/9179503/product.html"},{type:"link",url:"http://www.overstock.com/Worldstock-Fair-Trade/Natural-Thailand/9179503/product.html",link_text:"I want to buy this for my wife"}],required_attributes:[{name:"type"},{name:"url",description:"A link to an Overstock page",example:"http://www.overstock.com/Worldstock-Fair-Trade/Natural-Thailand/9179503/product.html"}],optional_attributes:[{name:"link_text",description:"The text that will show for the link","default":"A link to Overstock.com",example:"A present for my wife",notes:'If link_text parameter is left blank, the phrase "A link to Overstock.com" will be used as the link text.'},{name:"link_target",description:"Choose how to open the link.","default":"new_tab",options:["new_tab","current_tab"]}]},ostk_patterns.product_link={name:"Product Details Link",description:"Create simple links for a certain product. Each one will link to the product page on Overstock.com.",
notes:'You will get the product id from the products URL on Overstock.com. For instance, the product URL "http://www.overstock.com/Home-Garden/DHP-Emily-Grey-Linen-Chaise-Lounger/9747008/product.html" has a product ID of 9747008.',example_shortcodes:[{type:"product_link",display:"name",id:"8859234"}],required_attributes:[{name:"type"},{name:"id",example:"10234427",description:"Choose an attribute to display"},{name:"display",description:"Choose an attribute to display",options:["name","price","description"]}],optional_attributes:[{name:"link_target",description:"Choose how to open the link.","default":"new_tab",options:["new_tab","current_tab"]}]},ostk_patterns.rectangle={name:"Rectangle",description:"The rectangle shortcode lets you create a rectangular banner for a SINGLE product.",notes:'You will get the product id from the products URL on Overstock.com. For instance, the product URL "http://www.overstock.com/Home-Garden/DHP-Emily-Grey-Linen-Chaise-Lounger/9747008/product.html" has a product ID of 9747008.',example_shortcodes:[{type:"rectangle",category:"Home & Garden",width:"300px"}],required_attributes:[{name:"type"},{options:[{name:"id",description:"A products id",example:"8231882"},{name:"event",description:"Sales event elements",options:["flash_deals"]},{name:"category",description:"Select items from a specific Overstock store.",options:["Home & Garden","Jewelry & Watches","Sports & Toys","Worldstock Fair Trade","Clothing & Shoes","Health & Beauty","Food & Gifts","Office Supplies","Luggage & Bags","Crafts & Sewing","Baby","Pet Supplies","Emergency Preparedness","Bedding & Bath"]},{name:"keywords",description:"A keyword search",example:"soccer shoes"}]}],optional_attributes:[{name:"sort_by",description:"Choose a sort option",options:["Relevance","Recommended","Reviews","Lowest Price","Highest Price","New Arrivals"]},{name:"width",description:'Width of the shortcode element. This attribute accepts "px" or "%"',"default":"100%",example:'100%" or "300px'},{name:"link_target",description:"Choose how to open the link.","default":"new_tab",options:["new_tab","current_tab"]}]},ostk_patterns.sample_data={name:"Sample Data",description:"Print data form a given ID",example_shortcodes:[{type:"sample_data",id:"9659704"}],required_attributes:[{name:"type"},{name:"id",description:"Any product id",example:"10234427"}],optional_attributes:[]},ostk_patterns.search={name:"Search Query",description:"The Search Query shortcode will create a link that will take a user to a Search Results Page on Overstock.com.",example_shortcodes:[{type:"search",query:"soccer shoes"},{type:"search",query:"soccer shoes",link_text:"Overstock has great soccer shoes"}],required_attributes:[{name:"type"},{name:"query",description:"Product search terms",example:"soccer shoes"}],optional_attributes:[{name:"link_text",description:"The text that will show for the link","default":"query attribute text",example:"Click to see these soccer shoes!",notes:'The query will be used as the link text if the link_text parameter is empty (i.e. "soccer shoes").'},{name:"category",description:"Filter results by store",options:["Home & Garden","Jewelry & Watches","Sports & Toys","Worldstock Fair Trade","Clothing & Shoes","Health & Beauty","Food & Gifts","Office Supplies","Luggage & Bags","Crafts & Sewing","Baby","Pet Supplies","Emergency Preparedness","Bedding & Bath"]},{name:"sort_by",description:"Sort results in different ways",options:["Relevance","Recommended","Reviews","Lowest Price","Highest Price","New Arrivals"]},{name:"link_target",description:"Choose how to open the link.","default":"new_tab",options:["new_tab","current_tab"]}]},ostk_patterns.skyscraper={name:"Skyscraper",description:"Lets you create a skyscraper banner for up to three products.",notes:'You will get the product id from the products URL on Overstock.com. For instance, the product URL "http://www.overstock.com/Home-Garden/DHP-Emily-Grey-Linen-Chaise-Lounger/9747008/product.html" has a product ID of 9747008.',example_shortcodes:[{type:"skyscraper",category:"Home & Garden",width:"160px"}],required_attributes:[{name:"type"},{options:[{name:"product_ids",description:"A list of product ids separated by commas.",notes:"Required to have 1 or 2 product ids"},{name:"event",description:"Sales event elements",options:["flash_deals"]},{name:"category",description:"Select items from a specific Overstock store.",options:["Home & Garden","Jewelry & Watches","Sports & Toys","Worldstock Fair Trade","Clothing & Shoes","Health & Beauty","Food & Gifts","Office Supplies","Luggage & Bags","Crafts & Sewing","Baby","Pet Supplies","Emergency Preparedness","Bedding & Bath"]},{name:"keywords",description:"A keyword search",example:"soccer shoes"}]}],optional_attributes:[{name:"width",description:'Width of the shortcode element. This attribute accepts "px" or "%"',"default":"100%",example:'100%" or "300px'},{name:"number_of_items",description:"Choose an item limit. By default it is unlimited.","default":"10"},{name:"sort_by",description:"Choose a sort option",options:["Relevance","Recommended","Reviews","Lowest Price","Highest Price","New Arrivals"]},{name:"link_target",description:"Choose how to open the link.","default":"new_tab",options:["new_tab","current_tab"]}]},ostk_patterns.stock_photo={name:"Stock Photo",description:"Use Overstock&apos;s product and lifestyle photos for your blog. Each one will link to its corresponding product page on Overstock.com.",notes:'You will get the product id from the products URL on Overstock.com. For instance, the product URL "http://www.overstock.com/Home-Garden/DHP-Emily-Grey-Linen-Chaise-Lounger/9747008/product.html" has a product ID of 9747008.',example_shortcodes:[{type:"stock_photo",category:"Home & Garden",width:"300px"}],required_attributes:[{name:"type"},{options:[{name:"id",example:"10234427",description:"Choose an attribute to display"},{name:"category",description:"Select items from a specific Overstock store.",options:["Home & Garden","Jewelry & Watches","Sports & Toys","Worldstock Fair Trade","Clothing & Shoes","Health & Beauty","Food & Gifts","Office Supplies","Luggage & Bags","Crafts & Sewing","Baby","Pet Supplies","Emergency Preparedness","Bedding & Bath"]},{name:"keywords",description:"A keyword search",example:"soccer shoes"}]}],optional_attributes:[{name:"image_number",description:"Choose an image number, images are numbered from left to right on the product page, 1,2,3, ect."},{name:"sort_by",description:"Choose a sort option",options:["Relevance","Recommended","Reviews","Lowest Price","Highest Price","New Arrivals"]},{name:"width",description:'Width of the shortcode element. This attribute accepts "px" or "%"',"default":"100%",example:'100%" or "300px'},{name:"height",description:'Height of the shortcode element. This attribute accepts "px"',notes:"The height of the image will automatically adjust according to the width. The best practice would be to only set the height if it absolutely necessary .","default":"auto",example:"300px"},{name:"link_target",description:"Choose how to open the link.","default":"new_tab",options:["new_tab","current_tab"]},{name:"custom_css",description:"Add custom CSS to the image element.",example:"border:solid 1px red;"}]};